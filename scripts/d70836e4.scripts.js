"use strict";angular.module("EventBaseApp",["firebase","$strap.directives"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/propose",{templateUrl:"views/propose.html",controller:"ProposeCtrl"}).when("/talks",{templateUrl:"views/talks.html",controller:"TalksCtrl"}).when("/talks/:talkId",{templateUrl:"views/talkdetail.html",controller:"TalkDetailCtrl"}).when("/404",{templateUrl:"views/404.html",controller:"404Ctrl"}).otherwise({redirectTo:"/"})}]),angular.module("EventBaseApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("EventBaseApp").controller("ProposeCtrl",["$scope","$location","angularFireCollection","angularFireAuth","talksStorage","userService",function(a,b,c,d,e,f){var g=e.url,h=new Firebase(g);a.talks=c(h.limit(10)),a.addTalk=function(){return f.user?(a.newTalk.id=f.user.id,a.newTalk.email=f.user.email,a.talks.add(a.newTalk),b.path("/"),void 0):(alert("You must be logged in to propose a talk"),void 0)}}]),angular.module("EventBaseApp").service("talksStorage",function(){var a="https://eventbase.firebaseio.com/talks";return{url:a}}),angular.module("EventBaseApp").controller("TalksCtrl",["$scope","$location","angularFire","talksStorage","userService","angularFireVote",function(a,b,c,d,e,f){var g=d.url;c(g,a,"talks",{}).then(function(){}),a.talkDetail=function(a,c){a.preventDefault(),b.path("/talks/"+c)},a.vote=function(b,c,d){e.user||alert("You must be logged in to vote"),f.vote(a,c,d,e.user)}}]),angular.module("EventBaseApp").controller("TalkDetailCtrl",["$scope","$routeParams","$location","angularFire","talksStorage",function(a,b,c,d,e){var f=e.url+"/"+b.talkId;d(f,a,"talk",{}).then(function(){a.talk.title||c.path("/404")})}]),angular.module("EventBaseApp").controller("404Ctrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("EventBaseApp").service("angularFireVote",function(){return{vote:function(a,b,c,d){var e=a.talks[b].votes;e||(a.talks[b].votes={});var f=a.talks[b].votes[d.id];return f===c?(alert("Already voted"),void 0):(a.talks[b].votes[d.id]=c,void 0)}}}),angular.module("EventBaseApp").controller("LoginCtrl",["$scope","userService","angularFireAuth",function(a,b,c){var d="https://eventbase.firebaseio.com/talks";c.initialize(d,{scope:a,name:"user"}),a.login=function(){c.login("github")},a.logout=function(){c.logout()},a.$on("angularFireAuth:login",function(){b.user=a.user,b.isLogged=!0}),a.$on("angularFireAuth:logout",function(){b.isLogged=!1,b.user=null})}]),angular.module("EventBaseApp").service("userService",function(){return{isLogged:!1,username:null}});